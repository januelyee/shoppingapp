angular.module("checklist-model",[]).directive("checklistModel",["$parse","$compile",function(e,t){function n(e,t){if(angular.isArray(e)){for(var n=0;n<e.length;n++){if(angular.equals(e[n],t)){return true}}}return false}function r(e,t){e=angular.isArray(e)?e:[];for(var n=0;n<e.length;n++){if(angular.equals(e[n],t)){return e}}e.push(t);return e}function i(e,t){if(angular.isArray(e)){for(var n=0;n<e.length;n++){if(angular.equals(e[n],t)){e.splice(n,1);break}}}return e}function s(s,o,u){t(o)(s);var a=e(u.checklistModel);var f=a.assign;var l=e(u.checklistValue)(s.$parent);s.$watch("checked",function(e,t){if(e===t){return}var n=a(s.$parent);if(e===true){f(s.$parent,r(n,l))}else{f(s.$parent,i(n,l))}});s.$parent.$watch(u.checklistModel,function(e,t){s.checked=n(e,l)},true)}return{restrict:"A",priority:1e3,terminal:true,scope:true,compile:function(e,t){if(e[0].tagName!=="INPUT"||!e.attr("type","checkbox")){throw'checklist-model should be applied to `input[type="checkbox"]`.'}if(!t.checklistValue){throw"You should provide `checklist-value`."}e.removeAttr("checklist-model");e.attr("ng-model","checked");return s}}}])